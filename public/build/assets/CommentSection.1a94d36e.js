import{m as w}from"./moment.c82fa111.js";import{T as S,d as v,e as a,a as t,n as l,t as u,b as p,u as c,w as $,f as _,F as f,h as V,g as h,o as m,c as B}from"./app.894b1448.js";import{_ as N}from"./PrimaryButton.24da5572.js";import{_ as M}from"./TextAreaInput.79292e7c.js";import{_ as D}from"./InputError.f07b1b1e.js";import H from"./CommentChildSection.aaaf316f.js";const T={class:"flex space-x-4 text-sm text-gray-500"},L={class:"flex-none py-5"},j=["src"],F={class:"font-medium text-sm text-gray-900"},I=["innerHTML"],q={class:"text-xs"},z=["datetime"],E={class:"flex justify-between items-start gap-5 mt-2"},K={class:""},O={key:0,class:""},U={class:"flex-none flex space-x-5 mr-5"},Y={class:"space-x-2"},A={class:"space-x-2"},G=t("i",{class:"fa-regular fa-angle-down mr-2"},null,-1),Z={__name:"CommentSection",props:{course_id:Number,comment:Object,comment_idx:Number},setup(g){const e=g,o=S({id:null,comment:null,course_id:e.course_id,parent_id:e.comment.id}),y=()=>{o.post(route("courseComment.store"),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{o.reset(),i.value=!1}})},b=r=>{o.post(route("courseComment.like",r),{preserveScroll:!0,onSuccess:()=>{}})},k=r=>{o.post(route("courseComment.dislike",r),{preserveScroll:!0,onSuccess:()=>{}})},i=v(!1),d=v(!1);function x(r){return w(r).format("DD MMM Y HH:mm")}return(r,s)=>(m(),a(f,null,[t("div",T,[t("div",L,[t("img",{src:e.comment.user.profile_photo_url,alt:"",class:"h-10 w-10 rounded-full bg-gray-100"},null,8,j)]),t("div",{class:l([e.comment_idx===0?"":"border-t border-gray-300","flex-1 py-3"])},[t("h3",F,u(e.comment.user.name),1),t("div",{class:"prose prose-sm max-w-none text-gray-500",innerHTML:e.comment.content},null,8,I),t("p",q,[t("time",{datetime:x(e.comment.created_at)},u(x(e.comment.created_at)),9,z)]),t("div",E,[t("div",K,[t("button",{onClick:s[0]||(s[0]=n=>i.value=!i.value),class:"font-medium text-primary-600"},"Balas"),i.value?(m(),a("div",O,[p(M,{id:"comment",modelValue:c(o).comment,"onUpdate:modelValue":s[1]||(s[1]=n=>c(o).comment=n),class:"mt-1 block w-full",rows:"2",autofocus:"",required:""},null,8,["modelValue"]),p(N,{as:"button",onClick:y,class:l(["mt-3",{"opacity-25":c(o).processing}]),disabled:c(o).processing},{default:$(()=>[h(" Kirim ")]),_:1},8,["class","disabled"]),p(D,{message:c(o).errors.comment,class:"mt-2"},null,8,["message"])])):_("",!0)]),t("div",U,[t("div",Y,[t("button",{type:"button",onClick:s[2]||(s[2]=n=>b(e.comment.id))},[t("i",{class:l(["text-lg fa-heart",e.comment.has_upvoted?"fa-solid text-red-600":"fa-regular text-primary-600"])},null,2)]),e.comment.likes!=0?(m(),a("span",{key:0,class:l(e.comment.has_upvoted?"text-red-600":"text-primary-600")},u(e.comment.likes),3)):_("",!0)]),t("div",A,[t("button",{type:"button",onClick:s[3]||(s[3]=n=>k(e.comment.id))},[t("i",{class:l(["text-lg fa-thumbs-down",e.comment.has_downvoted?"fa-solid text-primary-600":"fa-regular text-primary-600"])},null,2)])])])])],2)]),(m(!0),a(f,null,V(e.comment.child,(n,C)=>(m(),a(f,null,[d.value?(m(),B(H,{key:0,course_id:e.course_id,comment:e.comment,child:n,child_idx:C},null,8,["course_id","comment","child","child_idx"])):_("",!0)],64))),256)),e.comment.child.length&&!d.value?(m(),a("button",{key:0,class:"ml-12 font-medium text-primary-600",onClick:s[4]||(s[4]=n=>d.value=!d.value)},[G,h(" "+u(e.comment.child.length)+" balasan ",1)])):_("",!0)],64))}};export{Z as default};
