import{o as b,e as y,r as Y,i as R,n as S,x as K,O as U,T as O,d as I,a,b as s,w as n,u as d,g as c,F as V,h as N,l as H,M as j}from"./app.3d0755d6.js";import{N as G,n as z,m as X,u as q,S as D,I as J,E as Q}from"./tippy.25ef37af.js";import{_ as W}from"./_plugin-vue_export-helper.cdc0426e.js";import{a as Z}from"./DialogModal.209936f2.js";import{_ as ee}from"./PrimaryButton.8c5a12ca.js";import{_ as oe}from"./DangerButton.a173cace.js";import{_ as te}from"./InputError.91000fae.js";const se={},ne={class:"relative z-0 inline-flex shadow-sm rounded-3xl"};function le(t,u){return b(),y("span",ne,[Y(t.$slots,"default")])}const T=W(se,[["render",le]]),p={__name:"GroupButtonLink",setup(t){const u=R(()=>"-ml-px relative disabled:opacity-50 inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:z-10 focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500");return(v,r)=>(b(),y("button",{type:"button",class:S(u.value)},[Y(v.$slots,"default")],2))}},ie=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)(?!.*\/channel\/)(?!\/@)(.+)?$/,ae=/^(https?:\/\/)?(www\.|music\.)?(youtube\.com|youtu\.be)(?!.*\/channel\/)(?!\/@)(.+)?$/g,re=t=>t.match(ie),M=t=>t?"https://www.youtube-nocookie.com/embed/":"https://www.youtube.com/embed/",ue=t=>{const{url:u,allowFullscreen:v,autoplay:r,ccLanguage:g,ccLoadPolicy:m,controls:f,disableKBcontrols:$,enableIFrameApi:x,endTime:w,interfaceLanguage:k,ivLoadPolicy:_,loop:C,modestBranding:B,nocookie:h,origin:L,playlist:l,progressBarColor:e,startAt:o}=t;if(u.includes("/embed/"))return u;if(u.includes("youtu.be")){const E=u.split("/").pop();return E?`${M(h)}${E}`:null}const P=/v=([-\w]+)/gm.exec(u);if(!P||!P[1])return null;let A=`${M(h)}${P[1]}`;const i=[];return v===!1&&i.push("fs=0"),r&&i.push("autoplay=1"),g&&i.push(`cc_lang_pref=${g}`),m&&i.push("cc_load_policy=1"),f||i.push("controls=0"),$&&i.push("disablekb=1"),x&&i.push("enablejsapi=1"),w&&i.push(`end=${w}`),k&&i.push(`hl=${k}`),_&&i.push(`iv_load_policy=${_}`),C&&i.push("loop=1"),B&&i.push("modestbranding=1"),L&&i.push(`origin=${L}`),l&&i.push(`playlist=${l}`),o&&i.push(`start=${o}`),e&&i.push(`color=${e}`),i.length&&(A+=`?${i.join("&")}`),A},de=G.create({name:"youtube",addOptions(){return{addPasteHandler:!0,allowFullscreen:!0,autoplay:!1,ccLanguage:void 0,ccLoadPolicy:void 0,controls:!0,disableKBcontrols:!1,enableIFrameApi:!1,endTime:0,height:480,interfaceLanguage:void 0,ivLoadPolicy:0,loop:!1,modestBranding:!1,HTMLAttributes:{},inline:!1,nocookie:!1,origin:"",playlist:"",progressBarColor:void 0,width:640}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},start:{default:0},width:{default:this.options.width},height:{default:this.options.height}}},parseHTML(){return[{tag:"div[data-youtube-video] iframe"}]},addCommands(){return{setYoutubeVideo:t=>({commands:u})=>re(t.src)?u.insertContent({type:this.name,attrs:t}):!1}},addPasteRules(){return this.options.addPasteHandler?[z({find:ae,type:this.type,getAttributes:t=>({src:t.input})})]:[]},renderHTML({HTMLAttributes:t}){const u=ue({url:t.src,allowFullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,controls:this.options.controls,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,nocookie:this.options.nocookie,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor,startAt:t.start||0});return t.src=u,["div",{"data-youtube-video":""},["iframe",X(this.options.HTMLAttributes,{width:this.options.width,height:this.options.height,allowfullscreen:this.options.allowFullscreen,autoplay:this.options.autoplay,ccLanguage:this.options.ccLanguage,ccLoadPolicy:this.options.ccLoadPolicy,disableKBcontrols:this.options.disableKBcontrols,enableIFrameApi:this.options.enableIFrameApi,endTime:this.options.endTime,interfaceLanguage:this.options.interfaceLanguage,ivLoadPolicy:this.options.ivLoadPolicy,loop:this.options.loop,modestBranding:this.options.modestBranding,origin:this.options.origin,playlist:this.options.playlist,progressBarColor:this.options.progressBarColor},t)]]}}),ce={class:"space-y-3"},pe=a("i",null,"Italic",-1),fe=a("b",null,"Bold",-1),ge={role:"list",class:"grid sm:grid-cols-3 lg:grid-cols-4 gap-3 list-none mt-5"},me={class:"relative"},he=["src"],be={class:"absolute bottom-0 left-0 right-0 flex justify-between"},ye=a("i",{class:"fa-duotone fa-pen"},null,-1),ve=a("span",{class:"ml-3"},"Pilih",-1),_e=a("i",{class:"fa-duotone fa-trash"},null,-1),xe=a("span",{class:"ml-3"},"Hapus",-1),we={class:""},ke={class:"block"},Le=["onClick"],$e=["onClick"],Ce=a("i",{class:"fa-duotone fa-image text-gray-400 text-5xl"},null,-1),Be=a("span",{class:"mt-2 block text-sm font-medium text-gray-900"},"Tambah Foto",-1),Pe=[Ce,Be],Ve={__name:"EditorInput",props:{modelValue:{type:String,default:""},gallery:Object},emits:["update:modelValue"],setup(t,{emit:u}){const v=t;K(()=>{U.reload({only:["modelValue"]})});const r=q({editorProps:{attributes:{class:"prose prose-sm sm:prose lg:prose-lg xl:prose-2xl p-3 mt-3 focus:outline-none bg-white border border-gray-300 focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 rounded-3xl shadow-sm"}},extensions:[D.configure({paragraph:{HTMLAttributes:{class:"text-base text-gray-600"}},Heading:{HTMLAttributes:{class:"text-gray-900"}}}),J.configure({inline:!0,allowBase64:!0,HTMLAttributes:{class:" rounded-3xl "}}),de.configure({inline:!1,ccLanguage:"id",interfaceLanguage:"id",enableIFrameApi:"true",modestBranding:"true",HTMLAttributes:{class:"w-full rounded-3xl "}})],onUpdate:({editor:l})=>{let e=l.getHTML();u("update:modelValue",e)},content:v.modelValue}),g=O({photo:null}),m=I(null),f=I(null),$=()=>{f.value&&(g.photo=f.value.files[0]),g.post(route("gallery.store"),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{m.value=null,_(),g.reset()}})},x=()=>{f.value.click()},w=()=>{const l=f.value.files[0];if(!l)return;const e=new FileReader;e.onload=o=>{m.value=o.target.result},e.readAsDataURL(l),$()},k=l=>{U.delete(route("gallery.destroy",l),{preserveScroll:!0,onSuccess:()=>{m.value=null,_()}})},_=()=>{var l;(l=f.value)!=null&&l.value&&(f.value.value=null)};function C(l){r.value.chain().focus().setImage({src:l}).run(),h.value=!1}function B(){const l=prompt("Enter YouTube URL");r.value.commands.setYoutubeVideo({src:l})}const h=I(!1),L=()=>{h.value=!1};return(l,e)=>(b(),y(V,null,[a("div",ce,[s(T,null,{default:n(()=>[s(p,{onClick:e[0]||(e[0]=o=>d(r).chain().focus().toggleHeading({level:1}).run()),class:"rounded-l-3xl"},{default:n(()=>[c("H1")]),_:1}),s(p,{onClick:e[1]||(e[1]=o=>d(r).chain().focus().toggleHeading({level:2}).run())},{default:n(()=>[c("H2")]),_:1}),s(p,{onClick:e[2]||(e[2]=o=>d(r).chain().focus().toggleHeading({level:3}).run())},{default:n(()=>[c("H3")]),_:1}),s(p,{onClick:e[3]||(e[3]=o=>d(r).chain().focus().toggleHeading({level:4}).run())},{default:n(()=>[c("H4")]),_:1}),s(p,{onClick:e[4]||(e[4]=o=>d(r).chain().focus().toggleHeading({level:5}).run())},{default:n(()=>[c("H5")]),_:1}),s(p,{onClick:e[5]||(e[5]=o=>d(r).chain().focus().setParagraph().run()),class:"rounded-r-3xl mr-2"},{default:n(()=>[c("P")]),_:1})]),_:1}),s(T,null,{default:n(()=>[s(p,{onClick:e[6]||(e[6]=o=>h.value=!0),class:"rounded-l-3xl rounded"},{default:n(()=>[c("Image")]),_:1}),s(p,{onClick:B},{default:n(()=>[c("Youtube")]),_:1}),s(p,{onClick:e[7]||(e[7]=o=>d(r).chain().focus().toggleCodeBlock().run()),class:"rounded-r-3xl mr-2"},{default:n(()=>[c("Code")]),_:1})]),_:1}),s(T,null,{default:n(()=>[s(p,{onClick:e[8]||(e[8]=o=>d(r).chain().focus().toggleItalic().run()),class:"rounded-l-3xl"},{default:n(()=>[pe]),_:1}),s(p,{onClick:e[9]||(e[9]=o=>d(r).chain().focus().toggleBold().run())},{default:n(()=>[fe]),_:1}),s(p,{onClick:e[10]||(e[10]=o=>d(r).chain().focus().toggleBulletList().run()),class:"rounded-r-3xl mr-2"},{default:n(()=>[c("List")]),_:1})]),_:1})]),s(d(Q),{ref:"input",onInput:e[11]||(e[11]=o=>l.$emit("update:modelValue",o.target.value)),editor:d(r),required:""},null,8,["editor"]),s(Z,{"max-width":"7xl",show:h.value,onClose:L},{title:n(()=>[c(" Tambah Image ")]),content:n(()=>[c(" Klik foto "),a("ul",ge,[(b(!0),y(V,null,N(l.$page.props.gallery,o=>(b(),y("li",{key:o.name,class:""},[a("div",me,[a("img",{class:"shadow-lg rounded-3xl w-full aspect-video object-cover",src:o.media[0].original_url,alt:""},null,8,he),a("div",be,[s(ee,{class:"rounded-none py-4 bg-opacity-50 inline-flex rounded-bl-3xl rounded-tr-3xl",onClick:F=>C(o.media[0].original_url)},{default:n(()=>[ye,ve]),_:2},1032,["onClick"]),s(oe,{onClick:H(F=>k(o.id),["prevent"]),class:"rounded-none py-4 bg-opacity-50 inline-flex rounded-br-3xl rounded-tl-3xl"},{default:n(()=>[_e,xe]),_:2},1032,["onClick"])])])]))),128)),a("li",we,[a("input",{ref_key:"photoInput",ref:f,type:"file",class:"hidden",onChange:w},null,544),a("div",ke,[m.value?(b(),y("div",{key:0,class:"",onClick:H(x,["prevent"])},[a("span",{class:"block rounded-3xl w-full aspect-video px-2 bg-cover bg-no-repeat bg-center border border-gray-300",style:j("background-image: url('"+m.value+"');")},null,4)],8,Le)):(b(),y("button",{key:1,onClick:H(x,["prevent"]),type:"button",class:"relative block w-full aspect-video p-12 text-center border-2 border-gray-400 border-dashed focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 rounded-3xl shadow-sm"},Pe,8,$e))]),s(te,{message:d(g).errors.photo,class:"mt-2"},null,8,["message"])])])]),footer:n(()=>[c(" Lorem ipsum ")]),_:1},8,["show"])],64))}};export{Ve as _};
