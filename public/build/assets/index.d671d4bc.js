import{P as Xt,a as Yt,E as Gt,i as Tr,b as Ar,p as Jt,c as Cr}from"./tippy.6c80af0c.js";import{q as Ie,d as yt,s as bt,N as ot,x as he,l as Dr,y as Sr,A as Lr,z as Mr,P as Pr,m as Rr,u as Hr,Q as Br,R as jr}from"./app.5add3a04.js";var N="top",K="bottom",z="right",I="left",wt="auto",We=[N,K,z,I],Te="start",Ve="end",$r="clippingParents",Qt="viewport",Be="popper",kr="reference",Lt=We.reduce(function(e,t){return e.concat([t+"-"+Te,t+"-"+Ve])},[]),Zt=[].concat(We,[wt]).reduce(function(e,t){return e.concat([t,t+"-"+Te,t+"-"+Ve])},[]),Vr="beforeRead",Nr="read",Ir="afterRead",Wr="beforeMain",Fr="main",Ur="afterMain",qr="beforeWrite",_r="write",Kr="afterWrite",zr=[Vr,Nr,Ir,Wr,Fr,Ur,qr,_r,Kr];function te(e){return e?(e.nodeName||"").toLowerCase():null}function U(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ge(e){var t=U(e).Element;return e instanceof t||e instanceof Element}function _(e){var t=U(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ot(e){if(typeof ShadowRoot>"u")return!1;var t=U(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function Xr(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},o=t.attributes[r]||{},u=t.elements[r];!_(u)||!te(u)||(Object.assign(u.style,n),Object.keys(o).forEach(function(l){var s=o[l];s===!1?u.removeAttribute(l):u.setAttribute(l,s===!0?"":s)}))})}function Yr(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],u=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),s=l.reduce(function(a,d){return a[d]="",a},{});!_(o)||!te(o)||(Object.assign(o.style,s),Object.keys(u).forEach(function(a){o.removeAttribute(a)}))})}}const er={name:"applyStyles",enabled:!0,phase:"write",fn:Xr,effect:Yr,requires:["computeStyles"]};function ee(e){return e.split("-")[0]}var me=Math.max,nt=Math.min,Ae=Math.round;function vt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tr(){return!/^((?!chrome|android).)*safari/i.test(vt())}function Ce(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),o=1,u=1;t&&_(e)&&(o=e.offsetWidth>0&&Ae(n.width)/e.offsetWidth||1,u=e.offsetHeight>0&&Ae(n.height)/e.offsetHeight||1);var l=ge(e)?U(e):window,s=l.visualViewport,a=!tr()&&r,d=(n.left+(a&&s?s.offsetLeft:0))/o,c=(n.top+(a&&s?s.offsetTop:0))/u,g=n.width/o,y=n.height/u;return{width:g,height:y,top:c,right:d+g,bottom:c+y,left:d,x:d,y:c}}function xt(e){var t=Ce(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function rr(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ot(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ae(e){return U(e).getComputedStyle(e)}function Gr(e){return["table","td","th"].indexOf(te(e))>=0}function pe(e){return((ge(e)?e.ownerDocument:e.document)||window.document).documentElement}function at(e){return te(e)==="html"?e:e.assignedSlot||e.parentNode||(Ot(e)?e.host:null)||pe(e)}function Mt(e){return!_(e)||ae(e).position==="fixed"?null:e.offsetParent}function Jr(e){var t=/firefox/i.test(vt()),r=/Trident/i.test(vt());if(r&&_(e)){var n=ae(e);if(n.position==="fixed")return null}var o=at(e);for(Ot(o)&&(o=o.host);_(o)&&["html","body"].indexOf(te(o))<0;){var u=ae(o);if(u.transform!=="none"||u.perspective!=="none"||u.contain==="paint"||["transform","perspective"].indexOf(u.willChange)!==-1||t&&u.willChange==="filter"||t&&u.filter&&u.filter!=="none")return o;o=o.parentNode}return null}function Fe(e){for(var t=U(e),r=Mt(e);r&&Gr(r)&&ae(r).position==="static";)r=Mt(r);return r&&(te(r)==="html"||te(r)==="body"&&ae(r).position==="static")?t:r||Jr(e)||t}function Et(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function je(e,t,r){return me(e,nt(t,r))}function Qr(e,t,r){var n=je(e,t,r);return n>r?r:n}function nr(){return{top:0,right:0,bottom:0,left:0}}function ir(e){return Object.assign({},nr(),e)}function or(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var Zr=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ir(typeof t!="number"?t:or(t,We))};function en(e){var t,r=e.state,n=e.name,o=e.options,u=r.elements.arrow,l=r.modifiersData.popperOffsets,s=ee(r.placement),a=Et(s),d=[I,z].indexOf(s)>=0,c=d?"height":"width";if(!(!u||!l)){var g=Zr(o.padding,r),y=xt(u),h=a==="y"?N:I,b=a==="y"?K:z,w=r.rects.reference[c]+r.rects.reference[a]-l[a]-r.rects.popper[c],O=l[a]-r.rects.reference[a],T=Fe(u),A=T?a==="y"?T.clientHeight||0:T.clientWidth||0:0,S=w/2-O/2,i=g[h],E=A-y[c]-g[b],f=A/2-y[c]/2+S,D=je(i,f,E),H=a;r.modifiersData[n]=(t={},t[H]=D,t.centerOffset=D-f,t)}}function tn(e){var t=e.state,r=e.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||!rr(t.elements.popper,o)||(t.elements.arrow=o))}const rn={name:"arrow",enabled:!0,phase:"main",fn:en,effect:tn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function De(e){return e.split("-")[1]}var nn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function on(e,t){var r=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:Ae(r*o)/o||0,y:Ae(n*o)/o||0}}function Pt(e){var t,r=e.popper,n=e.popperRect,o=e.placement,u=e.variation,l=e.offsets,s=e.position,a=e.gpuAcceleration,d=e.adaptive,c=e.roundOffsets,g=e.isFixed,y=l.x,h=y===void 0?0:y,b=l.y,w=b===void 0?0:b,O=typeof c=="function"?c({x:h,y:w}):{x:h,y:w};h=O.x,w=O.y;var T=l.hasOwnProperty("x"),A=l.hasOwnProperty("y"),S=I,i=N,E=window;if(d){var f=Fe(r),D="clientHeight",H="clientWidth";if(f===U(r)&&(f=pe(r),ae(f).position!=="static"&&s==="absolute"&&(D="scrollHeight",H="scrollWidth")),f=f,o===N||(o===I||o===z)&&u===Ve){i=K;var R=g&&f===E&&E.visualViewport?E.visualViewport.height:f[D];w-=R-n.height,w*=a?1:-1}if(o===I||(o===N||o===K)&&u===Ve){S=z;var M=g&&f===E&&E.visualViewport?E.visualViewport.width:f[H];h-=M-n.width,h*=a?1:-1}}var B=Object.assign({position:s},d&&nn),P=c===!0?on({x:h,y:w},U(r)):{x:h,y:w};if(h=P.x,w=P.y,a){var L;return Object.assign({},B,(L={},L[i]=A?"0":"",L[S]=T?"0":"",L.transform=(E.devicePixelRatio||1)<=1?"translate("+h+"px, "+w+"px)":"translate3d("+h+"px, "+w+"px, 0)",L))}return Object.assign({},B,(t={},t[i]=A?w+"px":"",t[S]=T?h+"px":"",t.transform="",t))}function an(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=n===void 0?!0:n,u=r.adaptive,l=u===void 0?!0:u,s=r.roundOffsets,a=s===void 0?!0:s,d={placement:ee(t.placement),variation:De(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Pt(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:a})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Pt(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const sn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:an,data:{}};var et={passive:!0};function un(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,u=o===void 0?!0:o,l=n.resize,s=l===void 0?!0:l,a=U(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return u&&d.forEach(function(c){c.addEventListener("scroll",r.update,et)}),s&&a.addEventListener("resize",r.update,et),function(){u&&d.forEach(function(c){c.removeEventListener("scroll",r.update,et)}),s&&a.removeEventListener("resize",r.update,et)}}const pn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:un,data:{}};var ln={left:"right",right:"left",bottom:"top",top:"bottom"};function rt(e){return e.replace(/left|right|bottom|top/g,function(t){return ln[t]})}var cn={start:"end",end:"start"};function Rt(e){return e.replace(/start|end/g,function(t){return cn[t]})}function Tt(e){var t=U(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function At(e){return Ce(pe(e)).left+Tt(e).scrollLeft}function dn(e,t){var r=U(e),n=pe(e),o=r.visualViewport,u=n.clientWidth,l=n.clientHeight,s=0,a=0;if(o){u=o.width,l=o.height;var d=tr();(d||!d&&t==="fixed")&&(s=o.offsetLeft,a=o.offsetTop)}return{width:u,height:l,x:s+At(e),y:a}}function fn(e){var t,r=pe(e),n=Tt(e),o=(t=e.ownerDocument)==null?void 0:t.body,u=me(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=me(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),s=-n.scrollLeft+At(e),a=-n.scrollTop;return ae(o||r).direction==="rtl"&&(s+=me(r.clientWidth,o?o.clientWidth:0)-u),{width:u,height:l,x:s,y:a}}function Ct(e){var t=ae(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function ar(e){return["html","body","#document"].indexOf(te(e))>=0?e.ownerDocument.body:_(e)&&Ct(e)?e:ar(at(e))}function $e(e,t){var r;t===void 0&&(t=[]);var n=ar(e),o=n===((r=e.ownerDocument)==null?void 0:r.body),u=U(n),l=o?[u].concat(u.visualViewport||[],Ct(n)?n:[]):n,s=t.concat(l);return o?s:s.concat($e(at(l)))}function ht(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function vn(e,t){var r=Ce(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Ht(e,t,r){return t===Qt?ht(dn(e,r)):ge(t)?vn(t,r):ht(fn(pe(e)))}function hn(e){var t=$e(at(e)),r=["absolute","fixed"].indexOf(ae(e).position)>=0,n=r&&_(e)?Fe(e):e;return ge(n)?t.filter(function(o){return ge(o)&&rr(o,n)&&te(o)!=="body"}):[]}function mn(e,t,r,n){var o=t==="clippingParents"?hn(e):[].concat(t),u=[].concat(o,[r]),l=u[0],s=u.reduce(function(a,d){var c=Ht(e,d,n);return a.top=me(c.top,a.top),a.right=nt(c.right,a.right),a.bottom=nt(c.bottom,a.bottom),a.left=me(c.left,a.left),a},Ht(e,l,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function sr(e){var t=e.reference,r=e.element,n=e.placement,o=n?ee(n):null,u=n?De(n):null,l=t.x+t.width/2-r.width/2,s=t.y+t.height/2-r.height/2,a;switch(o){case N:a={x:l,y:t.y-r.height};break;case K:a={x:l,y:t.y+t.height};break;case z:a={x:t.x+t.width,y:s};break;case I:a={x:t.x-r.width,y:s};break;default:a={x:t.x,y:t.y}}var d=o?Et(o):null;if(d!=null){var c=d==="y"?"height":"width";switch(u){case Te:a[d]=a[d]-(t[c]/2-r[c]/2);break;case Ve:a[d]=a[d]+(t[c]/2-r[c]/2);break}}return a}function Ne(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=n===void 0?e.placement:n,u=r.strategy,l=u===void 0?e.strategy:u,s=r.boundary,a=s===void 0?$r:s,d=r.rootBoundary,c=d===void 0?Qt:d,g=r.elementContext,y=g===void 0?Be:g,h=r.altBoundary,b=h===void 0?!1:h,w=r.padding,O=w===void 0?0:w,T=ir(typeof O!="number"?O:or(O,We)),A=y===Be?kr:Be,S=e.rects.popper,i=e.elements[b?A:y],E=mn(ge(i)?i:i.contextElement||pe(e.elements.popper),a,c,l),f=Ce(e.elements.reference),D=sr({reference:f,element:S,strategy:"absolute",placement:o}),H=ht(Object.assign({},S,D)),R=y===Be?H:f,M={top:E.top-R.top+T.top,bottom:R.bottom-E.bottom+T.bottom,left:E.left-R.left+T.left,right:R.right-E.right+T.right},B=e.modifiersData.offset;if(y===Be&&B){var P=B[o];Object.keys(M).forEach(function(L){var W=[z,K].indexOf(L)>=0?1:-1,F=[N,K].indexOf(L)>=0?"y":"x";M[L]+=P[F]*W})}return M}function gn(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=r.boundary,u=r.rootBoundary,l=r.padding,s=r.flipVariations,a=r.allowedAutoPlacements,d=a===void 0?Zt:a,c=De(n),g=c?s?Lt:Lt.filter(function(b){return De(b)===c}):We,y=g.filter(function(b){return d.indexOf(b)>=0});y.length===0&&(y=g);var h=y.reduce(function(b,w){return b[w]=Ne(e,{placement:w,boundary:o,rootBoundary:u,padding:l})[ee(w)],b},{});return Object.keys(h).sort(function(b,w){return h[b]-h[w]})}function yn(e){if(ee(e)===wt)return[];var t=rt(e);return[Rt(e),t,Rt(t)]}function bn(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,u=o===void 0?!0:o,l=r.altAxis,s=l===void 0?!0:l,a=r.fallbackPlacements,d=r.padding,c=r.boundary,g=r.rootBoundary,y=r.altBoundary,h=r.flipVariations,b=h===void 0?!0:h,w=r.allowedAutoPlacements,O=t.options.placement,T=ee(O),A=T===O,S=a||(A||!b?[rt(O)]:yn(O)),i=[O].concat(S).reduce(function(re,X){return re.concat(ee(X)===wt?gn(t,{placement:X,boundary:c,rootBoundary:g,padding:d,flipVariations:b,allowedAutoPlacements:w}):X)},[]),E=t.rects.reference,f=t.rects.popper,D=new Map,H=!0,R=i[0],M=0;M<i.length;M++){var B=i[M],P=ee(B),L=De(B)===Te,W=[N,K].indexOf(P)>=0,F=W?"width":"height",$=Ne(t,{placement:B,boundary:c,rootBoundary:g,altBoundary:y,padding:d}),k=W?L?z:I:L?K:N;E[F]>f[F]&&(k=rt(k));var j=rt(k),G=[];if(u&&G.push($[P]<=0),s&&G.push($[k]<=0,$[j]<=0),G.every(function(re){return re})){R=B,H=!1;break}D.set(B,G)}if(H)for(var J=b?3:1,le=function(X){var ne=i.find(function(ye){var ie=D.get(ye);if(ie)return ie.slice(0,X).every(function(be){return be})});if(ne)return R=ne,"break"},Q=J;Q>0;Q--){var ce=le(Q);if(ce==="break")break}t.placement!==R&&(t.modifiersData[n]._skip=!0,t.placement=R,t.reset=!0)}}const wn={name:"flip",enabled:!0,phase:"main",fn:bn,requiresIfExists:["offset"],data:{_skip:!1}};function Bt(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function jt(e){return[N,z,K,I].some(function(t){return e[t]>=0})}function On(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,u=t.modifiersData.preventOverflow,l=Ne(t,{elementContext:"reference"}),s=Ne(t,{altBoundary:!0}),a=Bt(l,n),d=Bt(s,o,u),c=jt(a),g=jt(d);t.modifiersData[r]={referenceClippingOffsets:a,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:g},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":g})}const xn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:On};function En(e,t,r){var n=ee(e),o=[I,N].indexOf(n)>=0?-1:1,u=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=u[0],s=u[1];return l=l||0,s=(s||0)*o,[I,z].indexOf(n)>=0?{x:s,y:l}:{x:l,y:s}}function Tn(e){var t=e.state,r=e.options,n=e.name,o=r.offset,u=o===void 0?[0,0]:o,l=Zt.reduce(function(c,g){return c[g]=En(g,t.rects,u),c},{}),s=l[t.placement],a=s.x,d=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=a,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=l}const An={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Tn};function Cn(e){var t=e.state,r=e.name;t.modifiersData[r]=sr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Dn={name:"popperOffsets",enabled:!0,phase:"read",fn:Cn,data:{}};function Sn(e){return e==="x"?"y":"x"}function Ln(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,u=o===void 0?!0:o,l=r.altAxis,s=l===void 0?!1:l,a=r.boundary,d=r.rootBoundary,c=r.altBoundary,g=r.padding,y=r.tether,h=y===void 0?!0:y,b=r.tetherOffset,w=b===void 0?0:b,O=Ne(t,{boundary:a,rootBoundary:d,padding:g,altBoundary:c}),T=ee(t.placement),A=De(t.placement),S=!A,i=Et(T),E=Sn(i),f=t.modifiersData.popperOffsets,D=t.rects.reference,H=t.rects.popper,R=typeof w=="function"?w(Object.assign({},t.rects,{placement:t.placement})):w,M=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),B=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(!!f){if(u){var L,W=i==="y"?N:I,F=i==="y"?K:z,$=i==="y"?"height":"width",k=f[i],j=k+O[W],G=k-O[F],J=h?-H[$]/2:0,le=A===Te?D[$]:H[$],Q=A===Te?-H[$]:-D[$],ce=t.elements.arrow,re=h&&ce?xt(ce):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:nr(),ne=X[W],ye=X[F],ie=je(0,D[$],re[$]),be=S?D[$]/2-J-ie-ne-M.mainAxis:le-ie-ne-M.mainAxis,se=S?-D[$]/2+J+ie+ye+M.mainAxis:Q+ie+ye+M.mainAxis,we=t.elements.arrow&&Fe(t.elements.arrow),Ue=we?i==="y"?we.clientTop||0:we.clientLeft||0:0,Le=(L=B==null?void 0:B[i])!=null?L:0,qe=k+be-Le-Ue,_e=k+se-Le,Me=je(h?nt(j,qe):j,k,h?me(G,_e):G);f[i]=Me,P[i]=Me-k}if(s){var Pe,Ke=i==="x"?N:I,ze=i==="x"?K:z,oe=f[E],ue=E==="y"?"height":"width",Re=oe+O[Ke],de=oe-O[ze],He=[N,I].indexOf(T)!==-1,Xe=(Pe=B==null?void 0:B[E])!=null?Pe:0,Ye=He?Re:oe-D[ue]-H[ue]-Xe+M.altAxis,Ge=He?oe+D[ue]+H[ue]-Xe-M.altAxis:de,Je=h&&He?Qr(Ye,oe,Ge):je(h?Ye:Re,oe,h?Ge:de);f[E]=Je,P[E]=Je-oe}t.modifiersData[n]=P}}const Mn={name:"preventOverflow",enabled:!0,phase:"main",fn:Ln,requiresIfExists:["offset"]};function Pn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Rn(e){return e===U(e)||!_(e)?Tt(e):Pn(e)}function Hn(e){var t=e.getBoundingClientRect(),r=Ae(t.width)/e.offsetWidth||1,n=Ae(t.height)/e.offsetHeight||1;return r!==1||n!==1}function Bn(e,t,r){r===void 0&&(r=!1);var n=_(t),o=_(t)&&Hn(t),u=pe(t),l=Ce(e,o,r),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(n||!n&&!r)&&((te(t)!=="body"||Ct(u))&&(s=Rn(t)),_(t)?(a=Ce(t,!0),a.x+=t.clientLeft,a.y+=t.clientTop):u&&(a.x=At(u))),{x:l.left+s.scrollLeft-a.x,y:l.top+s.scrollTop-a.y,width:l.width,height:l.height}}function jn(e){var t=new Map,r=new Set,n=[];e.forEach(function(u){t.set(u.name,u)});function o(u){r.add(u.name);var l=[].concat(u.requires||[],u.requiresIfExists||[]);l.forEach(function(s){if(!r.has(s)){var a=t.get(s);a&&o(a)}}),n.push(u)}return e.forEach(function(u){r.has(u.name)||o(u)}),n}function $n(e){var t=jn(e);return zr.reduce(function(r,n){return r.concat(t.filter(function(o){return o.phase===n}))},[])}function kn(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Vn(e){var t=e.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var $t={placement:"bottom",modifiers:[],strategy:"absolute"};function kt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Nn(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,o=t.defaultOptions,u=o===void 0?$t:o;return function(s,a,d){d===void 0&&(d=u);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},$t,u),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},g=[],y=!1,h={state:c,setOptions:function(T){var A=typeof T=="function"?T(c.options):T;w(),c.options=Object.assign({},u,c.options,A),c.scrollParents={reference:ge(s)?$e(s):s.contextElement?$e(s.contextElement):[],popper:$e(a)};var S=$n(Vn([].concat(n,c.options.modifiers)));return c.orderedModifiers=S.filter(function(i){return i.enabled}),b(),h.update()},forceUpdate:function(){if(!y){var T=c.elements,A=T.reference,S=T.popper;if(!!kt(A,S)){c.rects={reference:Bn(A,Fe(S),c.options.strategy==="fixed"),popper:xt(S)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var i=0;i<c.orderedModifiers.length;i++){if(c.reset===!0){c.reset=!1,i=-1;continue}var E=c.orderedModifiers[i],f=E.fn,D=E.options,H=D===void 0?{}:D,R=E.name;typeof f=="function"&&(c=f({state:c,options:H,name:R,instance:h})||c)}}}},update:kn(function(){return new Promise(function(O){h.forceUpdate(),O(c)})}),destroy:function(){w(),y=!0}};if(!kt(s,a))return h;h.setOptions(d).then(function(O){!y&&d.onFirstUpdate&&d.onFirstUpdate(O)});function b(){c.orderedModifiers.forEach(function(O){var T=O.name,A=O.options,S=A===void 0?{}:A,i=O.effect;if(typeof i=="function"){var E=i({state:c,name:T,instance:h,options:S}),f=function(){};g.push(E||f)}})}function w(){g.forEach(function(O){return O()}),g=[]}return h}}var In=[pn,Dn,sn,er,An,wn,Mn,rn,xn],Wn=Nn({defaultModifiers:In}),Fn="tippy-box",ur="tippy-content",Un="tippy-backdrop",pr="tippy-arrow",lr="tippy-svg-arrow",ve={passive:!0,capture:!0},cr=function(){return document.body};function lt(e,t,r){if(Array.isArray(e)){var n=e[t];return n==null?Array.isArray(r)?r[t]:r:n}return e}function Dt(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function dr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function Vt(e,t){if(t===0)return e;var r;return function(n){clearTimeout(r),r=setTimeout(function(){e(n)},t)}}function qn(e){return e.split(/\s+/).filter(Boolean)}function Ee(e){return[].concat(e)}function Nt(e,t){e.indexOf(t)===-1&&e.push(t)}function _n(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Kn(e){return e.split("-")[0]}function it(e){return[].slice.call(e)}function It(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function ke(){return document.createElement("div")}function st(e){return["Element","Fragment"].some(function(t){return Dt(e,t)})}function zn(e){return Dt(e,"NodeList")}function Xn(e){return Dt(e,"MouseEvent")}function Yn(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function Gn(e){return st(e)?[e]:zn(e)?it(e):Array.isArray(e)?e:it(document.querySelectorAll(e))}function ct(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function Wt(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Jn(e){var t,r=Ee(e),n=r[0];return n!=null&&(t=n.ownerDocument)!=null&&t.body?n.ownerDocument:document}function Qn(e,t){var r=t.clientX,n=t.clientY;return e.every(function(o){var u=o.popperRect,l=o.popperState,s=o.props,a=s.interactiveBorder,d=Kn(l.placement),c=l.modifiersData.offset;if(!c)return!0;var g=d==="bottom"?c.top.y:0,y=d==="top"?c.bottom.y:0,h=d==="right"?c.left.x:0,b=d==="left"?c.right.x:0,w=u.top-n+g>a,O=n-u.bottom-y>a,T=u.left-r+h>a,A=r-u.right-b>a;return w||O||T||A})}function dt(e,t,r){var n=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(o){e[n](o,r)})}function Ft(e,t){for(var r=t;r;){var n;if(e.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Z={isTouch:!1},Ut=0;function Zn(){Z.isTouch||(Z.isTouch=!0,window.performance&&document.addEventListener("mousemove",fr))}function fr(){var e=performance.now();e-Ut<20&&(Z.isTouch=!1,document.removeEventListener("mousemove",fr)),Ut=e}function ei(){var e=document.activeElement;if(Yn(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function ti(){document.addEventListener("touchstart",Zn,ve),window.addEventListener("blur",ei)}var ri=typeof window<"u"&&typeof document<"u",ni=ri?!!window.msCrypto:!1,ii={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},oi={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Y=Object.assign({appendTo:cr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ii,oi),ai=Object.keys(Y),si=function(t){var r=Object.keys(t);r.forEach(function(n){Y[n]=t[n]})};function vr(e){var t=e.plugins||[],r=t.reduce(function(n,o){var u=o.name,l=o.defaultValue;if(u){var s;n[u]=e[u]!==void 0?e[u]:(s=Y[u])!=null?s:l}return n},{});return Object.assign({},e,r)}function ui(e,t){var r=t?Object.keys(vr(Object.assign({},Y,{plugins:t}))):ai,n=r.reduce(function(o,u){var l=(e.getAttribute("data-tippy-"+u)||"").trim();if(!l)return o;if(u==="content")o[u]=l;else try{o[u]=JSON.parse(l)}catch{o[u]=l}return o},{});return n}function qt(e,t){var r=Object.assign({},t,{content:dr(t.content,[e])},t.ignoreAttributes?{}:ui(e,t.plugins));return r.aria=Object.assign({},Y.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var pi=function(){return"innerHTML"};function mt(e,t){e[pi()]=t}function _t(e){var t=ke();return e===!0?t.className=pr:(t.className=lr,st(e)?t.appendChild(e):mt(t,e)),t}function Kt(e,t){st(t.content)?(mt(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?mt(e,t.content):e.textContent=t.content)}function gt(e){var t=e.firstElementChild,r=it(t.children);return{box:t,content:r.find(function(n){return n.classList.contains(ur)}),arrow:r.find(function(n){return n.classList.contains(pr)||n.classList.contains(lr)}),backdrop:r.find(function(n){return n.classList.contains(Un)})}}function hr(e){var t=ke(),r=ke();r.className=Fn,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=ke();n.className=ur,n.setAttribute("data-state","hidden"),Kt(n,e.props),t.appendChild(r),r.appendChild(n),o(e.props,e.props);function o(u,l){var s=gt(t),a=s.box,d=s.content,c=s.arrow;l.theme?a.setAttribute("data-theme",l.theme):a.removeAttribute("data-theme"),typeof l.animation=="string"?a.setAttribute("data-animation",l.animation):a.removeAttribute("data-animation"),l.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof l.maxWidth=="number"?l.maxWidth+"px":l.maxWidth,l.role?a.setAttribute("role",l.role):a.removeAttribute("role"),(u.content!==l.content||u.allowHTML!==l.allowHTML)&&Kt(d,e.props),l.arrow?c?u.arrow!==l.arrow&&(a.removeChild(c),a.appendChild(_t(l.arrow))):a.appendChild(_t(l.arrow)):c&&a.removeChild(c)}return{popper:t,onUpdate:o}}hr.$$tippy=!0;var li=1,tt=[],ft=[];function ci(e,t){var r=qt(e,Object.assign({},Y,vr(It(t)))),n,o,u,l=!1,s=!1,a=!1,d=!1,c,g,y,h=[],b=Vt(qe,r.interactiveDebounce),w,O=li++,T=null,A=_n(r.plugins),S={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},i={id:O,reference:e,popper:ke(),popperInstance:T,props:r,state:S,plugins:A,clearDelayTimeouts:Ye,setProps:Ge,setContent:Je,show:yr,hide:br,hideWithInteractivity:wr,enable:He,disable:Xe,unmount:Or,destroy:xr};if(!r.render)return i;var E=r.render(i),f=E.popper,D=E.onUpdate;f.setAttribute("data-tippy-root",""),f.id="tippy-"+i.id,i.popper=f,e._tippy=i,f._tippy=i;var H=A.map(function(p){return p.fn(i)}),R=e.hasAttribute("aria-expanded");return we(),J(),k(),j("onCreate",[i]),r.showOnCreate&&Re(),f.addEventListener("mouseenter",function(){i.props.interactive&&i.state.isVisible&&i.clearDelayTimeouts()}),f.addEventListener("mouseleave",function(){i.props.interactive&&i.props.trigger.indexOf("mouseenter")>=0&&W().addEventListener("mousemove",b)}),i;function M(){var p=i.props.touch;return Array.isArray(p)?p:[p,0]}function B(){return M()[0]==="hold"}function P(){var p;return!!((p=i.props.render)!=null&&p.$$tippy)}function L(){return w||e}function W(){var p=L().parentNode;return p?Jn(p):document}function F(){return gt(f)}function $(p){return i.state.isMounted&&!i.state.isVisible||Z.isTouch||c&&c.type==="focus"?0:lt(i.props.delay,p?0:1,Y.delay)}function k(p){p===void 0&&(p=!1),f.style.pointerEvents=i.props.interactive&&!p?"":"none",f.style.zIndex=""+i.props.zIndex}function j(p,v,m){if(m===void 0&&(m=!0),H.forEach(function(x){x[p]&&x[p].apply(x,v)}),m){var C;(C=i.props)[p].apply(C,v)}}function G(){var p=i.props.aria;if(!!p.content){var v="aria-"+p.content,m=f.id,C=Ee(i.props.triggerTarget||e);C.forEach(function(x){var V=x.getAttribute(v);if(i.state.isVisible)x.setAttribute(v,V?V+" "+m:m);else{var q=V&&V.replace(m,"").trim();q?x.setAttribute(v,q):x.removeAttribute(v)}})}}function J(){if(!(R||!i.props.aria.expanded)){var p=Ee(i.props.triggerTarget||e);p.forEach(function(v){i.props.interactive?v.setAttribute("aria-expanded",i.state.isVisible&&v===L()?"true":"false"):v.removeAttribute("aria-expanded")})}}function le(){W().removeEventListener("mousemove",b),tt=tt.filter(function(p){return p!==b})}function Q(p){if(!(Z.isTouch&&(a||p.type==="mousedown"))){var v=p.composedPath&&p.composedPath()[0]||p.target;if(!(i.props.interactive&&Ft(f,v))){if(Ee(i.props.triggerTarget||e).some(function(m){return Ft(m,v)})){if(Z.isTouch||i.state.isVisible&&i.props.trigger.indexOf("click")>=0)return}else j("onClickOutside",[i,p]);i.props.hideOnClick===!0&&(i.clearDelayTimeouts(),i.hide(),s=!0,setTimeout(function(){s=!1}),i.state.isMounted||ne())}}}function ce(){a=!0}function re(){a=!1}function X(){var p=W();p.addEventListener("mousedown",Q,!0),p.addEventListener("touchend",Q,ve),p.addEventListener("touchstart",re,ve),p.addEventListener("touchmove",ce,ve)}function ne(){var p=W();p.removeEventListener("mousedown",Q,!0),p.removeEventListener("touchend",Q,ve),p.removeEventListener("touchstart",re,ve),p.removeEventListener("touchmove",ce,ve)}function ye(p,v){be(p,function(){!i.state.isVisible&&f.parentNode&&f.parentNode.contains(f)&&v()})}function ie(p,v){be(p,v)}function be(p,v){var m=F().box;function C(x){x.target===m&&(dt(m,"remove",C),v())}if(p===0)return v();dt(m,"remove",g),dt(m,"add",C),g=C}function se(p,v,m){m===void 0&&(m=!1);var C=Ee(i.props.triggerTarget||e);C.forEach(function(x){x.addEventListener(p,v,m),h.push({node:x,eventType:p,handler:v,options:m})})}function we(){B()&&(se("touchstart",Le,{passive:!0}),se("touchend",_e,{passive:!0})),qn(i.props.trigger).forEach(function(p){if(p!=="manual")switch(se(p,Le),p){case"mouseenter":se("mouseleave",_e);break;case"focus":se(ni?"focusout":"blur",Me);break;case"focusin":se("focusout",Me);break}})}function Ue(){h.forEach(function(p){var v=p.node,m=p.eventType,C=p.handler,x=p.options;v.removeEventListener(m,C,x)}),h=[]}function Le(p){var v,m=!1;if(!(!i.state.isEnabled||Pe(p)||s)){var C=((v=c)==null?void 0:v.type)==="focus";c=p,w=p.currentTarget,J(),!i.state.isVisible&&Xn(p)&&tt.forEach(function(x){return x(p)}),p.type==="click"&&(i.props.trigger.indexOf("mouseenter")<0||l)&&i.props.hideOnClick!==!1&&i.state.isVisible?m=!0:Re(p),p.type==="click"&&(l=!m),m&&!C&&de(p)}}function qe(p){var v=p.target,m=L().contains(v)||f.contains(v);if(!(p.type==="mousemove"&&m)){var C=ue().concat(f).map(function(x){var V,q=x._tippy,Oe=(V=q.popperInstance)==null?void 0:V.state;return Oe?{popperRect:x.getBoundingClientRect(),popperState:Oe,props:r}:null}).filter(Boolean);Qn(C,p)&&(le(),de(p))}}function _e(p){var v=Pe(p)||i.props.trigger.indexOf("click")>=0&&l;if(!v){if(i.props.interactive){i.hideWithInteractivity(p);return}de(p)}}function Me(p){i.props.trigger.indexOf("focusin")<0&&p.target!==L()||i.props.interactive&&p.relatedTarget&&f.contains(p.relatedTarget)||de(p)}function Pe(p){return Z.isTouch?B()!==p.type.indexOf("touch")>=0:!1}function Ke(){ze();var p=i.props,v=p.popperOptions,m=p.placement,C=p.offset,x=p.getReferenceClientRect,V=p.moveTransition,q=P()?gt(f).arrow:null,Oe=x?{getBoundingClientRect:x,contextElement:x.contextElement||L()}:e,St={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Qe){var xe=Qe.state;if(P()){var Er=F(),pt=Er.box;["placement","reference-hidden","escaped"].forEach(function(Ze){Ze==="placement"?pt.setAttribute("data-placement",xe.placement):xe.attributes.popper["data-popper-"+Ze]?pt.setAttribute("data-"+Ze,""):pt.removeAttribute("data-"+Ze)}),xe.attributes.popper={}}}},fe=[{name:"offset",options:{offset:C}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!V}},St];P()&&q&&fe.push({name:"arrow",options:{element:q,padding:3}}),fe.push.apply(fe,(v==null?void 0:v.modifiers)||[]),i.popperInstance=Wn(Oe,f,Object.assign({},v,{placement:m,onFirstUpdate:y,modifiers:fe}))}function ze(){i.popperInstance&&(i.popperInstance.destroy(),i.popperInstance=null)}function oe(){var p=i.props.appendTo,v,m=L();i.props.interactive&&p===cr||p==="parent"?v=m.parentNode:v=dr(p,[m]),v.contains(f)||v.appendChild(f),i.state.isMounted=!0,Ke()}function ue(){return it(f.querySelectorAll("[data-tippy-root]"))}function Re(p){i.clearDelayTimeouts(),p&&j("onTrigger",[i,p]),X();var v=$(!0),m=M(),C=m[0],x=m[1];Z.isTouch&&C==="hold"&&x&&(v=x),v?n=setTimeout(function(){i.show()},v):i.show()}function de(p){if(i.clearDelayTimeouts(),j("onUntrigger",[i,p]),!i.state.isVisible){ne();return}if(!(i.props.trigger.indexOf("mouseenter")>=0&&i.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(p.type)>=0&&l)){var v=$(!1);v?o=setTimeout(function(){i.state.isVisible&&i.hide()},v):u=requestAnimationFrame(function(){i.hide()})}}function He(){i.state.isEnabled=!0}function Xe(){i.hide(),i.state.isEnabled=!1}function Ye(){clearTimeout(n),clearTimeout(o),cancelAnimationFrame(u)}function Ge(p){if(!i.state.isDestroyed){j("onBeforeUpdate",[i,p]),Ue();var v=i.props,m=qt(e,Object.assign({},v,It(p),{ignoreAttributes:!0}));i.props=m,we(),v.interactiveDebounce!==m.interactiveDebounce&&(le(),b=Vt(qe,m.interactiveDebounce)),v.triggerTarget&&!m.triggerTarget?Ee(v.triggerTarget).forEach(function(C){C.removeAttribute("aria-expanded")}):m.triggerTarget&&e.removeAttribute("aria-expanded"),J(),k(),D&&D(v,m),i.popperInstance&&(Ke(),ue().forEach(function(C){requestAnimationFrame(C._tippy.popperInstance.forceUpdate)})),j("onAfterUpdate",[i,p])}}function Je(p){i.setProps({content:p})}function yr(){var p=i.state.isVisible,v=i.state.isDestroyed,m=!i.state.isEnabled,C=Z.isTouch&&!i.props.touch,x=lt(i.props.duration,0,Y.duration);if(!(p||v||m||C)&&!L().hasAttribute("disabled")&&(j("onShow",[i],!1),i.props.onShow(i)!==!1)){if(i.state.isVisible=!0,P()&&(f.style.visibility="visible"),k(),X(),i.state.isMounted||(f.style.transition="none"),P()){var V=F(),q=V.box,Oe=V.content;ct([q,Oe],0)}y=function(){var fe;if(!(!i.state.isVisible||d)){if(d=!0,f.offsetHeight,f.style.transition=i.props.moveTransition,P()&&i.props.animation){var ut=F(),Qe=ut.box,xe=ut.content;ct([Qe,xe],x),Wt([Qe,xe],"visible")}G(),J(),Nt(ft,i),(fe=i.popperInstance)==null||fe.forceUpdate(),j("onMount",[i]),i.props.animation&&P()&&ie(x,function(){i.state.isShown=!0,j("onShown",[i])})}},oe()}}function br(){var p=!i.state.isVisible,v=i.state.isDestroyed,m=!i.state.isEnabled,C=lt(i.props.duration,1,Y.duration);if(!(p||v||m)&&(j("onHide",[i],!1),i.props.onHide(i)!==!1)){if(i.state.isVisible=!1,i.state.isShown=!1,d=!1,l=!1,P()&&(f.style.visibility="hidden"),le(),ne(),k(!0),P()){var x=F(),V=x.box,q=x.content;i.props.animation&&(ct([V,q],C),Wt([V,q],"hidden"))}G(),J(),i.props.animation?P()&&ye(C,i.unmount):i.unmount()}}function wr(p){W().addEventListener("mousemove",b),Nt(tt,b),b(p)}function Or(){i.state.isVisible&&i.hide(),i.state.isMounted&&(ze(),ue().forEach(function(p){p._tippy.unmount()}),f.parentNode&&f.parentNode.removeChild(f),ft=ft.filter(function(p){return p!==i}),i.state.isMounted=!1,j("onHidden",[i]))}function xr(){i.state.isDestroyed||(i.clearDelayTimeouts(),i.unmount(),Ue(),delete e._tippy,i.state.isDestroyed=!0,j("onDestroy",[i]))}}function Se(e,t){t===void 0&&(t={});var r=Y.plugins.concat(t.plugins||[]);ti();var n=Object.assign({},t,{plugins:r}),o=Gn(e),u=o.reduce(function(l,s){var a=s&&ci(s,n);return a&&l.push(a),l},[]);return st(e)?u[0]:u}Se.defaultProps=Y;Se.setDefaultProps=si;Se.currentInput=Z;Object.assign({},er,{effect:function(t){var r=t.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});Se.setDefaultProps({render:hr});class di{constructor({editor:t,element:r,view:n,tippyOptions:o={},updateDelay:u=250,shouldShow:l}){this.preventHide=!1,this.shouldShow=({view:s,state:a,from:d,to:c})=>{const{doc:g,selection:y}=a,{empty:h}=y,b=!g.textBetween(d,c).length&&Tr(a.selection),w=this.element.contains(document.activeElement);return!(!(s.hasFocus()||w)||h||b||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:s})=>{var a;if(this.preventHide){this.preventHide=!1;return}(s==null?void 0:s.relatedTarget)&&((a=this.element.parentNode)===null||a===void 0?void 0:a.contains(s.relatedTarget))||this.hide()},this.tippyBlurHandler=s=>{this.blurHandler({event:s})},this.handleDebouncedUpdate=(s,a)=>{const d=!(a!=null&&a.selection.eq(s.state.selection)),c=!(a!=null&&a.doc.eq(s.state.doc));!d&&!c||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(s,d,c,a)},this.updateDelay))},this.updateHandler=(s,a,d,c)=>{var g,y,h;const{state:b,composing:w}=s,{selection:O}=b;if(w||!a&&!d)return;this.createTooltip();const{ranges:A}=O,S=Math.min(...A.map(f=>f.$from.pos)),i=Math.max(...A.map(f=>f.$to.pos));if(!((g=this.shouldShow)===null||g===void 0?void 0:g.call(this,{editor:this.editor,view:s,state:b,oldState:c,from:S,to:i}))){this.hide();return}(y=this.tippy)===null||y===void 0||y.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(Ar(b.selection)){let f=s.nodeDOM(S);const D=f.dataset.nodeViewWrapper?f:f.querySelector("[data-node-view-wrapper]");if(D&&(f=D.firstChild),f)return f.getBoundingClientRect()}return Jt(s,S,i)})}),this.show()},this.editor=t,this.element=r,this.view=n,this.updateDelay=u,l&&(this.shouldShow=l),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,r=!!t.parentElement;this.tippy||!r||(this.tippy=Se(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,r){const{state:n}=t,o=n.selection.$from.pos!==n.selection.$to.pos;if(this.updateDelay>0&&o){this.handleDebouncedUpdate(t,r);return}const u=!(r!=null&&r.selection.eq(t.state.selection)),l=!(r!=null&&r.doc.eq(t.state.doc));this.updateHandler(t,u,l,r)}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,r;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(r=this.tippy)===null||r===void 0||r.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const mr=e=>new Xt({key:typeof e.pluginKey=="string"?new Yt(e.pluginKey):e.pluginKey,view:t=>new di({view:t,...e})});Gt.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[mr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});class fi{constructor({editor:t,element:r,view:n,tippyOptions:o={},shouldShow:u}){this.preventHide=!1,this.shouldShow=({view:l,state:s})=>{const{selection:a}=s,{$anchor:d,empty:c}=a,g=d.depth===1,y=d.parent.isTextblock&&!d.parent.type.spec.code&&!d.parent.textContent;return!(!l.hasFocus()||!c||!g||!y||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var s;if(this.preventHide){this.preventHide=!1;return}(l==null?void 0:l.relatedTarget)&&((s=this.element.parentNode)===null||s===void 0?void 0:s.contains(l.relatedTarget))||this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.editor=t,this.element=r,this.view=n,u&&(this.shouldShow=u),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=o,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:t}=this.editor.options,r=!!t.parentElement;this.tippy||!r||(this.tippy=Se(t,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"right",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(t,r){var n,o,u;const{state:l}=t,{doc:s,selection:a}=l,{from:d,to:c}=a;if(r&&r.doc.eq(s)&&r.selection.eq(a))return;if(this.createTooltip(),!((n=this.shouldShow)===null||n===void 0?void 0:n.call(this,{editor:this.editor,view:t,state:l,oldState:r}))){this.hide();return}(o=this.tippy)===null||o===void 0||o.setProps({getReferenceClientRect:((u=this.tippyOptions)===null||u===void 0?void 0:u.getReferenceClientRect)||(()=>Jt(t,d,c))}),this.show()}show(){var t;(t=this.tippy)===null||t===void 0||t.show()}hide(){var t;(t=this.tippy)===null||t===void 0||t.hide()}destroy(){var t,r;!((t=this.tippy)===null||t===void 0)&&t.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(r=this.tippy)===null||r===void 0||r.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const gr=e=>new Xt({key:typeof e.pluginKey=="string"?new Yt(e.pluginKey):e.pluginKey,view:t=>new fi({view:t,...e})});Gt.create({name:"floatingMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"floatingMenu",shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[gr({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,shouldShow:this.options.shouldShow})]:[]}});Ie({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const r=yt(null);return bt(()=>{const{updateDelay:n,editor:o,pluginKey:u,shouldShow:l,tippyOptions:s}=e;o.registerPlugin(mr({updateDelay:n,editor:o,element:r.value,pluginKey:u,shouldShow:l,tippyOptions:s}))}),ot(()=>{const{pluginKey:n,editor:o}=e;o.unregisterPlugin(n)}),()=>{var n;return he("div",{ref:r},(n=t.default)===null||n===void 0?void 0:n.call(t))}}});function zt(e){return Br((t,r)=>({get(){return t(),e},set(n){e=n,requestAnimationFrame(()=>{requestAnimationFrame(()=>{r()})})}}))}class vi extends Cr{constructor(t={}){return super(t),this.vueRenderers=Mr(new Map),this.contentComponent=null,this.reactiveState=zt(this.view.state),this.reactiveExtensionStorage=zt(this.extensionStorage),this.on("transaction",()=>{this.reactiveState.value=this.view.state,this.reactiveExtensionStorage.value=this.extensionStorage}),Pr(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,r){super.registerPlugin(t,r),this.reactiveState.value=this.view.state}unregisterPlugin(t){super.unregisterPlugin(t),this.reactiveState.value=this.view.state}}const gi=Ie({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(e){const t=yt(),r=jr();return Dr(()=>{const n=e.editor;n&&n.options.element&&t.value&&Rr(()=>{if(!t.value||!n.options.element.firstChild)return;const o=Hr(t.value);t.value.append(...n.options.element.childNodes),n.contentComponent=r.ctx._,n.setOptions({element:o}),n.createNodeViews()})}),ot(()=>{const n=e.editor;if(!n||(n.isDestroyed||n.view.setProps({nodeViews:{}}),n.contentComponent=null,!n.options.element.firstChild))return;const o=document.createElement("div");o.append(...n.options.element.childNodes),n.setOptions({element:o})}),{rootEl:t}},render(){const e=[];return this.editor&&this.editor.vueRenderers.forEach(t=>{const r=he(Sr,{to:t.teleportElement,key:t.id},he(t.component,{ref:t.id,...t.props}));e.push(r)}),he("div",{ref:t=>{this.rootEl=t}},...e)}});Ie({name:"FloatingMenu",props:{pluginKey:{type:null,default:"floatingMenu"},editor:{type:Object,required:!0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(e,{slots:t}){const r=yt(null);return bt(()=>{const{pluginKey:n,editor:o,tippyOptions:u,shouldShow:l}=e;o.registerPlugin(gr({pluginKey:n,editor:o,element:r.value,tippyOptions:u,shouldShow:l}))}),ot(()=>{const{pluginKey:n,editor:o}=e;o.unregisterPlugin(n)}),()=>{var n;return he("div",{ref:r},(n=t.default)===null||n===void 0?void 0:n.call(t))}}});Ie({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return he(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}});Ie({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var e,t;return he(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e))}});const yi=(e={})=>{const t=Lr();return bt(()=>{t.value=new vi(e)}),ot(()=>{var r;(r=t.value)===null||r===void 0||r.destroy()}),t};export{gi as E,yi as u};
