import{m as b}from"./moment.abdca800.js";import{T as k,d as C,e as i,a as t,n as r,t as d,b as u,u as a,w,f as p,F as f,h as S,o as c,g as V,c as $}from"./app.e16c5092.js";import{_ as B}from"./PrimaryButton.66786709.js";import{_ as N}from"./TextAreaInput.b4c41d39.js";import{_ as M}from"./InputError.4d5ca991.js";import D from"./CommentChildSection.e9ee1028.js";const H={class:"flex space-x-4 text-sm text-gray-500"},T={class:"flex-none py-5"},L=["src"],j={class:"font-medium text-sm text-gray-900"},F=["innerHTML"],I={class:"text-xs"},q=["datetime"],z={class:"flex justify-between items-start gap-5 mt-2"},E={class:""},K={key:0,class:""},O={class:"flex-none flex space-x-5 mr-5"},U={class:"space-x-2"},Y={class:"space-x-2"},W={__name:"CommentSection",props:{course_id:Number,comment:Object,comment_idx:Number},setup(x){const e=x,s=k({id:null,comment:null,course_id:e.course_id,parent_id:e.comment.id}),v=()=>{s.post(route("courseComment.store"),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{s.reset(),l.value=!1}})},h=n=>{s.post(route("courseComment.like",n),{preserveScroll:!0,onSuccess:()=>{}})},g=n=>{s.post(route("courseComment.dislike",n),{preserveScroll:!0,onSuccess:()=>{}})},l=C(!1);function _(n){return b(n).format("DD MMM Y HH:mm")}return(n,o)=>(c(),i(f,null,[t("div",H,[t("div",T,[t("img",{src:e.comment.user.profile_photo_url,alt:"",class:"h-10 w-10 rounded-full bg-gray-100"},null,8,L)]),t("div",{class:r([e.comment_idx===0?"":"border-t border-gray-300","flex-1 py-3"])},[t("h3",j,d(e.comment.user.name),1),t("div",{class:"prose prose-sm max-w-none text-gray-500",innerHTML:e.comment.content},null,8,F),t("p",I,[t("time",{datetime:_(e.comment.created_at)},d(_(e.comment.created_at)),9,q)]),t("div",z,[t("div",E,[t("button",{onClick:o[0]||(o[0]=m=>l.value=!l.value),class:"font-medium text-primary-600"},"Balas"),l.value?(c(),i("div",K,[u(N,{id:"comment",modelValue:a(s).comment,"onUpdate:modelValue":o[1]||(o[1]=m=>a(s).comment=m),class:"mt-1 block w-full",rows:"2",autofocus:"",required:""},null,8,["modelValue"]),u(B,{as:"button",onClick:v,class:r(["mt-3",{"opacity-25":a(s).processing}]),disabled:a(s).processing},{default:w(()=>[V(" Kirim ")]),_:1},8,["class","disabled"]),u(M,{message:a(s).errors.comment,class:"mt-2"},null,8,["message"])])):p("",!0)]),t("div",O,[t("div",U,[t("button",{type:"button",onClick:o[2]||(o[2]=m=>h(e.comment.id))},[t("i",{class:r(["text-lg fa-heart",e.comment.has_upvoted?"fa-solid text-red-600":"fa-regular text-primary-600"])},null,2)]),e.comment.likes!=0?(c(),i("span",{key:0,class:r(e.comment.has_upvoted?"text-red-600":"text-primary-600")},d(e.comment.likes),3)):p("",!0)]),t("div",Y,[t("button",{type:"button",onClick:o[3]||(o[3]=m=>g(e.comment.id))},[t("i",{class:r(["text-lg fa-thumbs-down",e.comment.has_downvoted?"fa-solid text-primary-600":"fa-regular text-primary-600"])},null,2)])])])])],2)]),(c(!0),i(f,null,S(e.comment.child,(m,y)=>(c(),$(D,{course_id:e.course_id,comment:e.comment,child:m,child_idx:y},null,8,["course_id","comment","child","child_idx"]))),256))],64))}};export{W as default};
