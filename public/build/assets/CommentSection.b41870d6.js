import{m as B}from"./moment.99fa77a6.js";import{T as M,d as S,U as L,o as l,e as m,a as t,n as a,g,t as u,F as h,f,b as x,u as d,w as N,h as V,c as H}from"./app.c8c93927.js";import{_ as D}from"./PrimaryButton.a52668c4.js";import{_ as I}from"./TextAreaInput.a976d03e.js";import{_ as T}from"./InputError.4d9653d8.js";const O={class:"flex space-x-4 text-sm text-gray-500 ml-10"},U={class:"flex-none py-0"},q=["src"],F={class:"font-medium text-sm text-gray-900"},K=t("i",{class:"fa-regular fa-angle-right"},null,-1),Y=["innerHTML"],z={class:"text-xs"},E=["datetime"],A={class:"flex justify-between items-start gap-5 mt-2"},G={class:""},J={key:0,class:""},P={class:"flex-none flex space-x-5 mr-5"},Q={class:"space-x-2"},R={class:"space-x-2"},W={__name:"CommentChildSection",props:{course_id:Number,blog_id:Number,comment:Object,child:Object,child_idx:Number,mother:{type:Boolean,default:!1}},setup(v){const e=v,o=M({id:null,comment:null,course_id:e.course_id,blog_id:e.blog_id,parent_id:e.child.id}),y=()=>{e.course_id!=null?o.post(route("courseComment.store"),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{o.reset(),n.value=!1}}):e.blog_id!=null&&o.post(route("blogComment.store"),{errorBag:"updateInformation",preserveScroll:!0,onSuccess:()=>{o.reset(),n.value=!1}})},k=i=>{e.course_id!=null?o.post(route("courseComment.like",i),{preserveScroll:!0,onSuccess:()=>{}}):e.blog_id!=null&&o.post(route("blogComment.like",i),{preserveScroll:!0,onSuccess:()=>{}})},C=i=>{e.course_id!=null?o.post(route("courseComment.dislike",i),{preserveScroll:!0,onSuccess:()=>{}}):e.blog_id!=null&&o.post(route("blogComment.dislike",i),{preserveScroll:!0,onSuccess:()=>{}})},n=S(!1);function _(i){return B(i).format("DD MMM Y HH:mm")}return(i,c)=>{const b=L("CommentChildSection",!0);return l(),m(h,null,[t("div",O,[t("div",U,[t("img",{src:e.child.user.profile_photo_url,alt:"",class:"h-10 w-10 rounded-full bg-gray-100"},null,8,q)]),t("div",{class:a([(e.child_idx===0,""),"flex-1 pb-3"])},[t("h3",F,[g(u(e.child.user.name)+" ",1),e.child.mother_name&&e.mother?(l(),m(h,{key:0},[K,g(" "+u(e.child.mother_name),1)],64)):f("",!0)]),t("div",{class:"prose prose-sm max-w-none text-gray-500",innerHTML:e.child.content},null,8,Y),t("p",z,[t("time",{datetime:_(e.child.created_at)},u(_(e.child.created_at)),9,E)]),t("div",A,[t("div",G,[t("button",{onClick:c[0]||(c[0]=s=>n.value=!n.value),class:"font-medium text-primary-600"},"Balas"),n.value?(l(),m("div",J,[x(I,{id:"comment",modelValue:d(o).comment,"onUpdate:modelValue":c[1]||(c[1]=s=>d(o).comment=s),class:"mt-1 block w-full",rows:"2",autofocus:"",required:""},null,8,["modelValue"]),x(D,{as:"button",onClick:y,class:a(["mt-3",{"opacity-25":d(o).processing}]),disabled:d(o).processing},{default:N(()=>[g(" Kirim ")]),_:1},8,["class","disabled"]),x(T,{message:d(o).errors.comment,class:"mt-2"},null,8,["message"])])):f("",!0)]),t("div",P,[t("div",Q,[t("button",{type:"button",onClick:c[2]||(c[2]=s=>k(e.child.id))},[t("i",{class:a(["text-lg fa-heart",e.child.has_upvoted?"fa-solid text-red-600":"fa-regular text-primary-600"])},null,2)]),e.child.likes!=0?(l(),m("span",{key:0,class:a(e.child.has_upvoted?"text-red-600":"text-primary-600")},u(e.child.likes),3)):f("",!0)]),t("div",R,[t("button",{type:"button",onClick:c[3]||(c[3]=s=>C(e.child.id))},[t("i",{class:a(["text-lg fa-thumbs-down",e.child.has_downvoted?"fa-solid text-primary-600":"fa-regular text-primary-600"])},null,2)])])])])],2)]),(l(!0),m(h,null,V(e.child.child,(s,r)=>(l(),H(b,{course_id:e.course_id,comment:e.comment,child:s,child_idx:r,mother:!0},null,8,["course_id","comment","child","child_idx"]))),256))],64)}}},X={class:"flex space-x-4 text-sm text-gray-500"},Z={class:"flex-none py-5"},ee=["src"],te={class:"font-medium text-sm text-gray-900"},oe=["innerHTML"],se={class:"text-xs"},le=["datetime"],re={class:"flex justify-between items-start gap-5 mt-2"},ne={class:""},ie={key:0,class:""},ce={class:"flex-none flex space-x-5 mr-5"},me={class:"space-x-2"},ae={class:"space-x-2"},de=t("i",{class:"fa-regular fa-angle-down mr-2"},null,-1),xe={__name:"CommentSection",props:{course_id:Number,blog_id:Number,comment:Object,comment_idx:Number},setup(v){var c,b;const e=v,o=M({id:null,comment:null,course_id:(c=e.course_id)!=null?c:null,blog_id:(b=e.blog_id)!=null?b:null,parent_id:e.comment.id}),y=()=>{e.course_id!=null?o.post(route("courseComment.store"),{errorBag:"storeInformation",preserveScroll:!0,onSuccess:()=>{o.reset(),n.value=!1}}):e.blog_id!=null&&o.post(route("blogComment.store"),{errorBag:"updateInformation",preserveScroll:!0,onSuccess:()=>{o.reset(),n.value=!1}})},k=s=>{e.course_id!=null?o.post(route("courseComment.like",s),{preserveScroll:!0,onSuccess:()=>{}}):e.blog_id!=null&&o.post(route("blogComment.like",s),{preserveScroll:!0,onSuccess:()=>{}})},C=s=>{e.course_id!=null?o.post(route("courseComment.dislike",s),{preserveScroll:!0,onSuccess:()=>{}}):e.blog_id!=null&&o.post(route("blogComment.dislike",s),{preserveScroll:!0,onSuccess:()=>{}})},n=S(!1),_=S(!1);function i(s){return B(s).format("DD MMM Y HH:mm")}return(s,r)=>(l(),m(h,null,[t("div",X,[t("div",Z,[t("img",{src:e.comment.user.profile_photo_url,alt:"",class:"h-10 w-10 rounded-full bg-gray-100"},null,8,ee)]),t("div",{class:a([e.comment_idx===0?"":"border-t border-gray-300","flex-1 py-3"])},[t("h3",te,u(e.comment.user.name),1),t("div",{class:"prose prose-sm max-w-none text-gray-500",innerHTML:e.comment.content},null,8,oe),t("p",se,[t("time",{datetime:i(e.comment.created_at)},u(i(e.comment.created_at)),9,le)]),t("div",re,[t("div",ne,[t("button",{onClick:r[0]||(r[0]=p=>n.value=!n.value),class:"font-medium text-primary-600"},"Balas"),n.value?(l(),m("div",ie,[x(I,{id:"comment",modelValue:d(o).comment,"onUpdate:modelValue":r[1]||(r[1]=p=>d(o).comment=p),class:"mt-1 block w-full",rows:"2",autofocus:"",required:""},null,8,["modelValue"]),x(D,{as:"button",onClick:y,class:a(["mt-3",{"opacity-25":d(o).processing}]),disabled:d(o).processing},{default:N(()=>[g(" Kirim ")]),_:1},8,["class","disabled"]),x(T,{message:d(o).errors.comment,class:"mt-2"},null,8,["message"])])):f("",!0)]),t("div",ce,[t("div",me,[t("button",{type:"button",onClick:r[2]||(r[2]=p=>k(e.comment.id))},[t("i",{class:a(["text-lg fa-heart",e.comment.has_upvoted?"fa-solid text-red-600":"fa-regular text-primary-600"])},null,2)]),e.comment.likes!=0?(l(),m("span",{key:0,class:a(e.comment.has_upvoted?"text-red-600":"text-primary-600")},u(e.comment.likes),3)):f("",!0)]),t("div",ae,[t("button",{type:"button",onClick:r[3]||(r[3]=p=>C(e.comment.id))},[t("i",{class:a(["text-lg fa-thumbs-down",e.comment.has_downvoted?"fa-solid text-primary-600":"fa-regular text-primary-600"])},null,2)])])])])],2)]),(l(!0),m(h,null,V(e.comment.child,(p,j)=>{var $,w;return l(),m(h,null,[_.value?(l(),H(W,{key:0,course_id:($=e.course_id)!=null?$:null,blog_id:(w=e.blog_id)!=null?w:null,comment:e.comment,child:p,child_idx:j},null,8,["course_id","blog_id","comment","child","child_idx"])):f("",!0)],64)}),256)),e.comment.child.length&&!_.value?(l(),m("button",{key:0,class:"ml-12 font-medium text-primary-600",onClick:r[4]||(r[4]=p=>_.value=!_.value)},[de,g(" "+u(e.comment.child.length)+" balasan ",1)])):f("",!0)],64))}};export{xe as _};
